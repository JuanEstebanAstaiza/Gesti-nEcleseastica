<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ekklesia — Gestión Eclesiástica</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&family=Playfair+Display:wght@500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.2.0/remixicon.min.css">
  <link rel="stylesheet" href="./css/styles.css" />
</head>
<body>
  <!-- Toast Container -->
  <div id="toast-container" class="toast-container"></div>

  <!-- =====================================================
       LANDING PAGE - Vista Pública
       ===================================================== -->
  <div id="landing-page" class="landing-page">
    <!-- Header Público -->
    <header class="public-header">
      <div class="header-container">
        <div class="header-brand">
          <div class="header-logo" id="church-logo">
            <i class="ri-hand-heart-line"></i>
          </div>
          <span class="header-name" id="church-name-header">Mi Iglesia</span>
        </div>
        <nav class="header-nav">
          <a href="#" class="nav-link active" data-page="home">Inicio</a>
          <a href="#" class="nav-link" data-page="about">Nosotros</a>
          <a href="#" class="nav-link" data-page="events">Eventos</a>
          <a href="#" class="nav-link" data-page="donate">Donar</a>
          <a href="#" class="nav-link" data-page="live">En Vivo</a>
        </nav>
        <div class="header-actions">
          <button class="btn btn-secondary" id="btn-login">
            <i class="ri-user-line"></i>
            <span>Ingresar</span>
          </button>
        </div>
        <button class="mobile-menu-btn" id="mobile-menu-btn">
          <i class="ri-menu-line"></i>
        </button>
      </div>
    </header>

    <!-- Page: HOME -->
    <main id="page-home" class="public-page active">
      <!-- Hero Section -->
      <section class="hero-section" id="hero-section">
        <div class="hero-bg"></div>
        <div class="hero-content">
          <h1 id="church-name-hero">Bienvenido a Nuestra Iglesia</h1>
          <p class="hero-slogan" id="church-slogan">Un lugar de fe, esperanza y amor</p>
          <div class="hero-buttons">
            <button class="btn btn-primary btn-lg" data-page="live">
              <i class="ri-live-line"></i>
              <span>Ver Transmisión</span>
            </button>
            <button class="btn btn-outline btn-lg" data-page="events">
              <i class="ri-calendar-line"></i>
              <span>Próximos Eventos</span>
            </button>
          </div>
        </div>
        <div class="hero-scroll-indicator">
          <i class="ri-arrow-down-line"></i>
        </div>
      </section>

      <!-- Service Times -->
      <section class="section section-services">
        <div class="container">
          <h2 class="section-title">Horarios de Servicio</h2>
          <div class="services-grid" id="service-schedule">
            <div class="service-card">
              <i class="ri-sun-line"></i>
              <h3>Domingo</h3>
              <p>9:00 AM - Escuela Dominical</p>
              <p>11:00 AM - Culto Principal</p>
            </div>
            <div class="service-card">
              <i class="ri-moon-line"></i>
              <h3>Miércoles</h3>
              <p>7:00 PM - Estudio Bíblico</p>
            </div>
            <div class="service-card">
              <i class="ri-group-line"></i>
              <h3>Viernes</h3>
              <p>7:00 PM - Reunión de Jóvenes</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Featured Events -->
      <section class="section section-events-preview">
        <div class="container">
          <div class="section-header-row">
            <h2 class="section-title">Próximos Eventos</h2>
            <a href="#" class="link" data-page="events">Ver todos →</a>
          </div>
          <div class="events-preview-grid" id="featured-events">
            <div class="event-preview-card">
              <div class="event-date">
                <span class="day">15</span>
                <span class="month">ENE</span>
              </div>
              <div class="event-info">
                <h3>Cargando eventos...</h3>
                <p>Próximamente más información</p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Announcements -->
      <section class="section section-announcements" id="announcements-section" style="display:none;">
        <div class="container">
          <h2 class="section-title">Anuncios</h2>
          <div class="announcements-list" id="announcements-list"></div>
        </div>
      </section>
    </main>

    <!-- Page: ABOUT (Quiénes Somos) -->
    <main id="page-about" class="public-page">
      <section class="page-hero">
        <h1>Quiénes Somos</h1>
      </section>
      <section class="section">
        <div class="container container-narrow">
          <div class="about-content" id="about-content">
            <div class="about-section">
              <h2>Nuestra Historia</h2>
              <p id="about-history">Cargando información...</p>
            </div>
            <div class="about-section">
              <h2>Misión</h2>
              <p id="about-mission">Cargando información...</p>
            </div>
            <div class="about-section">
              <h2>Visión</h2>
              <p id="about-vision">Cargando información...</p>
            </div>
            <div class="about-section">
              <h2>Nuestros Valores</h2>
              <p id="about-values">Cargando información...</p>
            </div>
          </div>

          <div class="contact-info-card">
            <h3>Contáctanos</h3>
            <div class="contact-details">
              <div class="contact-item">
                <i class="ri-map-pin-line"></i>
                <span id="contact-address">Dirección no disponible</span>
              </div>
              <div class="contact-item">
                <i class="ri-phone-line"></i>
                <span id="contact-phone">Teléfono no disponible</span>
              </div>
              <div class="contact-item">
                <i class="ri-mail-line"></i>
                <span id="contact-email">Email no disponible</span>
              </div>
            </div>
            <div class="social-links" id="social-links">
              <!-- Se llenan dinámicamente -->
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Page: EVENTS -->
    <main id="page-events" class="public-page">
      <section class="page-hero">
        <h1>Eventos</h1>
      </section>
      <section class="section">
        <div class="container">
          <div class="events-list" id="events-list">
            <div class="loading-state">
              <i class="ri-loader-4-line spin"></i>
              <p>Cargando eventos...</p>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Page: DONATE -->
    <main id="page-donate" class="public-page">
      <section class="page-hero">
        <h1>Cómo Donar</h1>
        <p>Tu generosidad hace posible nuestra misión</p>
      </section>
      <section class="section">
        <div class="container container-narrow">
          <div class="donate-intro" id="donate-intro">
            <p>Gracias por considerar apoyar nuestra iglesia. Cada donación nos ayuda a continuar con nuestra misión.</p>
          </div>

          <div class="donation-types">
            <div class="donation-type-card">
              <div class="donation-icon"><i class="ri-heart-3-fill"></i></div>
              <h3>Diezmo</h3>
              <p>El 10% de tus ingresos como acto de fe y obediencia</p>
            </div>
            <div class="donation-type-card">
              <div class="donation-icon"><i class="ri-gift-fill"></i></div>
              <h3>Ofrenda</h3>
              <p>Tu ofrenda voluntaria para el sostenimiento de la obra</p>
            </div>
            <div class="donation-type-card">
              <div class="donation-icon"><i class="ri-earth-fill"></i></div>
              <h3>Misiones</h3>
              <p>Apoya la expansión del evangelio alrededor del mundo</p>
            </div>
          </div>

          <div class="payment-methods-section">
            <h2>Métodos de Pago</h2>
            <div class="payment-methods" id="payment-methods">
              <div class="payment-method-card">
                <i class="ri-bank-line"></i>
                <h4>Transferencia Bancaria</h4>
                <p id="bank-details">Información no disponible</p>
              </div>
              <div class="payment-method-card">
                <i class="ri-paypal-line"></i>
                <h4>PayPal</h4>
                <p id="paypal-info">No configurado</p>
              </div>
              <div class="payment-method-card">
                <i class="ri-hand-coin-line"></i>
                <h4>Presencial</h4>
                <p>Puedes dar tu ofrenda durante los servicios</p>
              </div>
            </div>
          </div>

          <div class="donate-cta">
            <button class="btn btn-primary btn-lg" id="btn-donate-online" style="display:none;">
              <i class="ri-external-link-line"></i>
              <span>Donar en Línea</span>
            </button>
          </div>
        </div>
      </section>
    </main>

    <!-- Page: LIVE (Transmisión en Vivo) -->
    <main id="page-live" class="public-page">
      <section class="page-hero page-hero-live">
        <h1><i class="ri-live-fill live-indicator"></i> Transmisión en Vivo</h1>
      </section>
      <section class="section section-live">
        <div class="container">
          <div class="live-container" id="live-container">
            <!-- Estado: Sin transmisión -->
            <div class="no-live-state" id="no-live-state">
              <div class="no-live-icon">
                <i class="ri-vidicon-line"></i>
              </div>
              <h2>No hay transmisión en vivo en este momento</h2>
              <p>Consulta nuestros horarios de servicio para saber cuándo estaremos en vivo</p>
              <button class="btn btn-secondary" data-page="home">
                <i class="ri-calendar-line"></i>
                <span>Ver Horarios</span>
              </button>
            </div>

            <!-- Estado: Transmitiendo -->
            <div class="live-player" id="live-player" style="display:none;">
              <div class="video-wrapper">
                <iframe id="live-iframe" 
                        src="" 
                        frameborder="0" 
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                        allowfullscreen>
                </iframe>
              </div>
              <div class="live-info">
                <h2 id="live-title">Servicio Dominical</h2>
                <p id="live-description">Transmisión en vivo de nuestro servicio</p>
              </div>
            </div>
          </div>

          <!-- Próximas transmisiones -->
          <div class="upcoming-streams" id="upcoming-streams" style="display:none;">
            <h3>Próximas Transmisiones</h3>
            <div class="streams-list" id="streams-list"></div>
          </div>

          <!-- Transmisiones anteriores -->
          <div class="past-streams" id="past-streams" style="display:none;">
            <h3>Transmisiones Anteriores</h3>
            <div class="streams-grid" id="past-streams-grid"></div>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer Público -->
    <footer class="public-footer">
      <div class="footer-container">
        <div class="footer-brand">
          <div class="footer-logo">
            <i class="ri-hand-heart-line"></i>
          </div>
          <span id="footer-church-name">Mi Iglesia</span>
        </div>
        <div class="footer-links">
          <a href="#" data-page="about">Quiénes Somos</a>
          <a href="#" data-page="events">Eventos</a>
          <a href="#" data-page="donate">Donar</a>
          <a href="#" data-page="live">En Vivo</a>
        </div>
        <div class="footer-social" id="footer-social">
          <!-- Se llenan dinámicamente -->
        </div>
        <p class="footer-copy">© 2024 Powered by <strong>Ekklesia</strong></p>
      </div>
    </footer>
  </div>

  <!-- =====================================================
       MODALES
       ===================================================== -->

  <!-- Modal de Login/Registro -->
  <div id="auth-modal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-content auth-modal-content">
      <button class="modal-close" id="auth-modal-close">
        <i class="ri-close-line"></i>
      </button>
      <div class="auth-brand">
        <div class="auth-logo">
          <i class="ri-hand-heart-line"></i>
        </div>
        <h2 id="auth-church-name">Mi Iglesia</h2>
        <p>Ingresa a tu cuenta</p>
      </div>

      <div class="auth-tabs">
        <button class="auth-tab active" data-tab="login">Ingresar</button>
        <button class="auth-tab" data-tab="register">Registrarse</button>
      </div>

      <form id="login-form" class="auth-form active">
        <div class="form-group">
          <label for="login-email">Correo electrónico</label>
          <div class="input-wrapper">
            <i class="ri-mail-line"></i>
            <input type="email" id="login-email" name="email" placeholder="tu@correo.com" required />
          </div>
        </div>
        <div class="form-group">
          <label for="login-password">Contraseña</label>
          <div class="input-wrapper">
            <i class="ri-lock-line"></i>
            <input type="password" id="login-password" name="password" placeholder="••••••••" required />
          </div>
        </div>
        <button type="submit" class="btn btn-primary btn-full">
          <span>Ingresar</span>
          <i class="ri-arrow-right-line"></i>
        </button>
      </form>

      <form id="register-form" class="auth-form">
        <div class="form-group">
          <label for="register-name">Nombre completo</label>
          <div class="input-wrapper">
            <i class="ri-user-line"></i>
            <input type="text" id="register-name" name="full_name" placeholder="Tu nombre" required />
          </div>
        </div>
        <div class="form-group">
          <label for="register-email">Correo electrónico</label>
          <div class="input-wrapper">
            <i class="ri-mail-line"></i>
            <input type="email" id="register-email" name="email" placeholder="tu@correo.com" required />
          </div>
        </div>
        <div class="form-group">
          <label for="register-password">Contraseña</label>
          <div class="input-wrapper">
            <i class="ri-lock-line"></i>
            <input type="password" id="register-password" name="password" placeholder="Mínimo 6 caracteres" required minlength="6" />
          </div>
        </div>
        <button type="submit" class="btn btn-primary btn-full">
          <span>Crear cuenta</span>
          <i class="ri-arrow-right-line"></i>
        </button>
      </form>
    </div>
  </div>

  <!-- Modal de Inscripción a Evento -->
  <div id="registration-modal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h3>Inscribirse al Evento</h3>
        <button class="btn btn-ghost btn-icon modal-close-btn">
          <i class="ri-close-line"></i>
        </button>
      </div>
      <div class="modal-body">
        <form id="registration-form">
          <input type="hidden" id="reg-event-id" name="event_id" />
          <div class="form-group">
            <label for="reg-name">Nombre completo</label>
            <div class="input-wrapper">
              <i class="ri-user-line"></i>
              <input type="text" id="reg-name" name="attendee_name" placeholder="Tu nombre" required />
            </div>
          </div>
          <div class="form-group">
            <label for="reg-email">Correo electrónico</label>
            <div class="input-wrapper">
              <i class="ri-mail-line"></i>
              <input type="email" id="reg-email" name="attendee_email" placeholder="tu@correo.com" required />
            </div>
          </div>
          <div class="form-group">
            <label for="reg-phone">Teléfono (opcional)</label>
            <div class="input-wrapper">
              <i class="ri-phone-line"></i>
              <input type="tel" id="reg-phone" name="attendee_phone" placeholder="+57 300 123 4567" />
            </div>
          </div>
          <div class="form-group">
            <label for="reg-notes">Notas (opcional)</label>
            <textarea id="reg-notes" name="notes" rows="2" placeholder="Comentarios adicionales..."></textarea>
          </div>
          <div class="form-actions">
            <button type="button" class="btn btn-secondary modal-close-btn">Cancelar</button>
            <button type="submit" class="btn btn-primary">
              <i class="ri-check-line"></i>
              <span>Confirmar Inscripción</span>
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- =====================================================
       PANEL DE USUARIO (APP)
       ===================================================== -->
  <div id="user-app" class="app hidden">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="sidebar-logo">
          <i class="ri-hand-heart-line"></i>
        </div>
        <div class="sidebar-brand">
          <h2 id="app-church-name">Mi Iglesia</h2>
          <span class="sidebar-subtitle">Mi Panel</span>
        </div>
      </div>

      <nav class="sidebar-nav">
        <a href="#" class="nav-item active" data-section="dashboard">
          <i class="ri-dashboard-3-line"></i>
          <span>Inicio</span>
        </a>
        <a href="#" class="nav-item" data-section="my-donations">
          <i class="ri-heart-3-line"></i>
          <span>Mis Donaciones</span>
        </a>
        <a href="#" class="nav-item" data-section="my-events">
          <i class="ri-calendar-check-line"></i>
          <span>Mis Eventos</span>
        </a>
        <a href="#" class="nav-item" data-section="live-stream">
          <i class="ri-live-line"></i>
          <span>En Vivo</span>
        </a>
        <a href="#" class="nav-item" data-section="profile">
          <i class="ri-user-settings-line"></i>
          <span>Mi Perfil</span>
        </a>

        <!-- Admin Section -->
        <div class="nav-divider" id="admin-divider" style="display:none;"></div>
        <p class="nav-label" id="admin-label" style="display:none;">Administración</p>
        
        <a href="#" class="nav-item" data-section="admin-donations" id="nav-admin-donations" style="display:none;">
          <i class="ri-money-dollar-circle-line"></i>
          <span>Donaciones</span>
        </a>
        <a href="#" class="nav-item" data-section="admin-events" id="nav-admin-events" style="display:none;">
          <i class="ri-calendar-event-line"></i>
          <span>Eventos</span>
        </a>
        <a href="#" class="nav-item" data-section="admin-expenses" id="nav-admin-expenses" style="display:none;">
          <i class="ri-wallet-3-line"></i>
          <span>Gastos</span>
        </a>
        <a href="#" class="nav-item" data-section="admin-announcements" id="nav-admin-announcements" style="display:none;">
          <i class="ri-notification-3-line"></i>
          <span>Anuncios</span>
        </a>
        <a href="#" class="nav-item" data-section="admin-documents" id="nav-admin-documents" style="display:none;">
          <i class="ri-folder-3-line"></i>
          <span>Documentos</span>
        </a>
        <a href="#" class="nav-item" data-section="admin-config" id="nav-admin-config" style="display:none;">
          <i class="ri-settings-3-line"></i>
          <span>Configuración</span>
        </a>
        <a href="#" class="nav-item" data-section="admin-reports" id="nav-admin-reports" style="display:none;">
          <i class="ri-bar-chart-box-line"></i>
          <span>Reportes</span>
        </a>
      </nav>

      <div class="sidebar-footer">
        <button class="btn btn-ghost btn-sm" id="btn-back-to-site">
          <i class="ri-arrow-left-line"></i>
          <span>Volver al sitio</span>
        </button>
        <div class="user-card">
          <div class="user-avatar">
            <i class="ri-user-line"></i>
          </div>
          <div class="user-info">
            <span id="user-name">Usuario</span>
            <span id="user-role" class="user-role">member</span>
          </div>
        </div>
        <button id="logout-btn" class="btn btn-ghost btn-icon" title="Cerrar sesión">
          <i class="ri-logout-box-r-line"></i>
        </button>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Dashboard Section -->
      <section id="section-dashboard" class="section active">
        <header class="section-header">
          <div>
            <h1>Bienvenido</h1>
            <p>Resumen de tu actividad</p>
          </div>
        </header>

        <div class="welcome-card">
          <div class="welcome-icon"><i class="ri-sun-line"></i></div>
          <div class="welcome-text">
            <h2 id="welcome-name">¡Hola!</h2>
            <p>Gracias por ser parte de nuestra comunidad</p>
          </div>
        </div>

        <!-- Stats for Admin -->
        <div class="stats-row" id="admin-stats" style="display:none;">
          <div class="stat-card">
            <div class="stat-icon"><i class="ri-heart-3-line"></i></div>
            <div class="stat-value" id="stat-donations-count">0</div>
            <div class="stat-label">Donaciones</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon success"><i class="ri-money-dollar-circle-line"></i></div>
            <div class="stat-value" id="stat-total-amount">$0</div>
            <div class="stat-label">Total Recaudado</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon primary"><i class="ri-calendar-event-line"></i></div>
            <div class="stat-value" id="stat-events-count">0</div>
            <div class="stat-label">Eventos</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon warning"><i class="ri-file-list-3-line"></i></div>
            <div class="stat-value" id="stat-documents-count">0</div>
            <div class="stat-label">Documentos</div>
          </div>
        </div>

        <!-- Breakdown by Type (Admin) -->
        <div class="card" id="chart-card" style="display:none;">
          <div class="card-header">
            <h3>Donaciones por Tipo</h3>
          </div>
          <div class="card-body">
            <div id="chart-by-type" class="breakdown-container">
              <p class="empty-message">Cargando datos...</p>
            </div>
          </div>
        </div>

        <!-- Recent Activity -->
        <div class="card">
          <div class="card-header">
            <h3>Actividad Reciente</h3>
          </div>
          <div class="card-body">
            <div id="recent-activity" class="activity-list">
              <p class="empty-message">No hay actividad reciente</p>
            </div>
          </div>
        </div>

        <div class="quick-actions">
          <button class="quick-action-btn" data-section="my-events">
            <i class="ri-calendar-line"></i>
            <span>Ver Eventos</span>
          </button>
          <button class="quick-action-btn" data-section="live-stream">
            <i class="ri-live-line"></i>
            <span>Ver Transmisión</span>
          </button>
          <button class="quick-action-btn" data-section="profile">
            <i class="ri-user-line"></i>
            <span>Mi Perfil</span>
          </button>
        </div>
      </section>

      <!-- My Donations Section -->
      <section id="section-my-donations" class="section">
        <header class="section-header">
          <div>
            <h1>Mis Donaciones</h1>
            <p>Historial de tus contribuciones</p>
          </div>
          <button class="btn btn-primary" id="btn-new-donation">
            <i class="ri-add-line"></i>
            <span>Nueva Donación</span>
          </button>
        </header>

        <!-- Donation Form -->
        <div id="donation-form-card" class="card form-card hidden">
          <div class="card-header">
            <h3>Registrar Donación</h3>
            <button class="btn btn-ghost btn-icon close-form-btn">
              <i class="ri-close-line"></i>
            </button>
          </div>
          <div class="card-body">
            <form id="donation-form" class="form-grid">
              <div class="form-group">
                <label>Tipo de Donación</label>
                <div class="select-wrapper">
                  <select name="donation_type" required>
                    <option value="diezmo">Diezmo</option>
                    <option value="ofrenda">Ofrenda</option>
                    <option value="misiones">Misiones</option>
                    <option value="especial">Ofrenda Especial</option>
                  </select>
                  <i class="ri-arrow-down-s-line"></i>
                </div>
              </div>
              <div class="form-group">
                <label>Monto</label>
                <div class="input-wrapper">
                  <span class="input-prefix">$</span>
                  <input type="number" name="amount" step="0.01" min="0" placeholder="0.00" required />
                </div>
              </div>
              <div class="form-group">
                <label>Medio de Pago</label>
                <div class="select-wrapper">
                  <select name="payment_method" required>
                    <option value="efectivo">Efectivo</option>
                    <option value="transferencia">Transferencia</option>
                    <option value="tarjeta">Tarjeta</option>
                    <option value="otro">Otro</option>
                  </select>
                  <i class="ri-arrow-down-s-line"></i>
                </div>
              </div>
              <div class="form-group">
                <label>Fecha</label>
                <div class="input-wrapper">
                  <i class="ri-calendar-line"></i>
                  <input type="date" name="donation_date" required />
                </div>
              </div>
              <div class="form-group full-width">
                <label>Nota (opcional)</label>
                <textarea name="note" rows="2" placeholder="Detalles adicionales..."></textarea>
              </div>
              <div class="form-actions">
                <button type="button" class="btn btn-secondary close-form-btn">Cancelar</button>
                <button type="submit" class="btn btn-primary">
                  <i class="ri-save-line"></i>
                  <span>Guardar</span>
                </button>
              </div>
            </form>
          </div>
        </div>

        <div class="card">
          <div class="card-body">
            <div id="my-donations-list" class="table-wrapper">
              <p class="empty-message">Aún no tienes donaciones registradas</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Live Stream Section (User) -->
      <section id="section-live-stream" class="section">
        <header class="section-header">
          <div>
            <h1>Transmisión en Vivo</h1>
            <p>Servicios y eventos en directo</p>
          </div>
        </header>
        <div id="user-live-container">
          <!-- Se llena dinámicamente -->
        </div>
      </section>

      <!-- My Events Section -->
      <section id="section-my-events" class="section">
        <header class="section-header">
          <div>
            <h1>Mis Eventos</h1>
            <p>Eventos a los que estás inscrito</p>
          </div>
        </header>
        <div class="card">
          <div class="card-body">
            <div id="my-events-list">
              <p class="empty-message">No estás inscrito a ningún evento</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Profile Section -->
      <section id="section-profile" class="section">
        <header class="section-header">
          <div>
            <h1>Mi Perfil</h1>
            <p>Información de tu cuenta</p>
          </div>
        </header>
        <div class="card">
          <div class="card-body">
            <form id="profile-form" class="form-grid">
              <div class="form-group">
                <label>Nombre completo</label>
                <input type="text" id="profile-name" name="full_name" />
              </div>
              <div class="form-group">
                <label>Correo electrónico</label>
                <input type="email" id="profile-email" name="email" disabled />
              </div>
              <div class="form-group">
                <label>Teléfono</label>
                <input type="tel" id="profile-phone" name="phone" />
              </div>
              <div class="form-actions">
                <button type="submit" class="btn btn-primary">
                  <i class="ri-save-line"></i>
                  <span>Guardar Cambios</span>
                </button>
              </div>
            </form>
          </div>
        </div>
      </section>

      <!-- =====================================================
           ADMIN SECTIONS (solo para admins)
           ===================================================== -->

      <!-- Admin Donations -->
      <section id="section-admin-donations" class="section">
        <header class="section-header">
          <div>
            <h1>Gestión de Donaciones</h1>
            <p>Administra las donaciones de la iglesia</p>
          </div>
          <button class="btn btn-primary" id="btn-register-donation">
            <i class="ri-add-line"></i>
            <span>Registrar Donación</span>
          </button>
        </header>
        
        <div id="admin-donation-form" class="card form-card hidden">
          <div class="card-header">
            <h3>Registrar Donación</h3>
            <button class="btn btn-ghost btn-icon close-form-btn"><i class="ri-close-line"></i></button>
          </div>
          <div class="card-body">
            <form id="admin-donation-form-el" class="form-grid" enctype="multipart/form-data">
              <!-- Datos del Donante -->
              <div class="form-section-title full-width">Información del Donante</div>
              <div class="form-group">
                <label>Nombre Completo *</label>
                <input type="text" name="donor_name" required placeholder="Nombre del donante" />
              </div>
              <div class="form-group">
                <label>Cédula / Documento</label>
                <input type="text" name="donor_document" placeholder="CC 123456789" />
              </div>
              <div class="form-group full-width">
                <label>Dirección</label>
                <input type="text" name="donor_address" placeholder="Dirección (opcional)" />
              </div>

              <!-- Montos por Tipo con Método de Pago -->
              <div class="form-section-title full-width">Montos de Donación</div>
              
              <div class="donation-type-row full-width">
                <div class="donation-type-label">Diezmos</div>
                <div class="donation-type-fields">
                  <input type="number" name="amount_diezmo" step="0.01" min="0" placeholder="$ 0.00" />
                  <select name="method_diezmo">
                    <option value="">- Método -</option>
                    <option value="efectivo">Efectivo</option>
                    <option value="transferencia">Transferencia</option>
                    <option value="tarjeta">Tarjeta</option>
                    <option value="otro">Otro</option>
                  </select>
                </div>
              </div>
              
              <div class="donation-type-row full-width">
                <div class="donation-type-label">Ofrendas</div>
                <div class="donation-type-fields">
                  <input type="number" name="amount_ofrenda" step="0.01" min="0" placeholder="$ 0.00" />
                  <select name="method_ofrenda">
                    <option value="">- Método -</option>
                    <option value="efectivo">Efectivo</option>
                    <option value="transferencia">Transferencia</option>
                    <option value="tarjeta">Tarjeta</option>
                    <option value="otro">Otro</option>
                  </select>
                </div>
              </div>
              
              <div class="donation-type-row full-width">
                <div class="donation-type-label">Misiones</div>
                <div class="donation-type-fields">
                  <input type="number" name="amount_misiones" step="0.01" min="0" placeholder="$ 0.00" />
                  <select name="method_misiones">
                    <option value="">- Método -</option>
                    <option value="efectivo">Efectivo</option>
                    <option value="transferencia">Transferencia</option>
                    <option value="tarjeta">Tarjeta</option>
                    <option value="otro">Otro</option>
                  </select>
                </div>
              </div>
              
              <div class="donation-type-row full-width">
                <div class="donation-type-label">Especial</div>
                <div class="donation-type-fields">
                  <input type="number" name="amount_especial" step="0.01" min="0" placeholder="$ 0.00" />
                  <select name="method_especial">
                    <option value="">- Método -</option>
                    <option value="efectivo">Efectivo</option>
                    <option value="transferencia">Transferencia</option>
                    <option value="tarjeta">Tarjeta</option>
                    <option value="otro">Otro</option>
                  </select>
                </div>
              </div>

              <!-- Fecha -->
              <div class="form-section-title full-width">Información de Pago</div>
              <div class="form-group">
                <label>Fecha de la Donación *</label>
                <input type="date" name="donation_date" required />
              </div>

              <!-- Soporte -->
              <div class="form-section-title full-width">Soporte de Pago</div>
              <div class="form-group full-width">
                <label>Documento de Soporte (PDF/Imagen)</label>
                <div class="file-upload-area" id="donation-file-area">
                  <input type="file" name="support_file" id="donation-support-file" accept=".pdf,.jpg,.jpeg,.png" />
                  <div class="file-upload-placeholder">
                    <i class="ri-upload-cloud-line"></i>
                    <span>Arrastra un archivo o haz clic para seleccionar</span>
                    <small>PDF, JPG, PNG (máx. 5MB)</small>
                  </div>
                  <div class="file-preview" id="donation-file-preview"></div>
                </div>
              </div>

              <div class="form-group full-width">
                <label>Nota / Observaciones</label>
                <textarea name="note" rows="2" placeholder="Detalles adicionales..."></textarea>
              </div>
              
              <div class="form-actions full-width">
                <button type="button" class="btn btn-secondary close-form-btn">Cancelar</button>
                <button type="submit" class="btn btn-primary"><i class="ri-save-line"></i> Guardar Donación</button>
              </div>
            </form>
          </div>
        </div>

        <div class="card">
          <div class="card-body">
            <div id="admin-donations-list" class="table-wrapper">
              <p class="empty-message">Cargando donaciones...</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Admin Events -->
      <section id="section-admin-events" class="section">
        <header class="section-header">
          <div>
            <h1>Gestión de Eventos</h1>
            <p>Crea y administra eventos de la iglesia</p>
          </div>
          <button class="btn btn-primary" id="btn-create-event">
            <i class="ri-add-line"></i>
            <span>Crear Evento</span>
          </button>
        </header>
        
        <div id="admin-event-form" class="card form-card hidden">
          <div class="card-header">
            <h3>Nuevo Evento</h3>
            <button class="btn btn-ghost btn-icon close-form-btn"><i class="ri-close-line"></i></button>
          </div>
          <div class="card-body">
            <form id="admin-event-form-el" class="form-grid">
              <input type="hidden" name="event_id" />
              <div class="form-group full-width">
                <label>Nombre del evento</label>
                <input type="text" name="name" required placeholder="Nombre del evento" />
              </div>
              <div class="form-group full-width">
                <label>Descripción</label>
                <textarea name="description" rows="3" placeholder="Descripción del evento..."></textarea>
              </div>
              <div class="form-group">
                <label>Fecha inicio</label>
                <input type="date" name="start_date" required />
              </div>
              <div class="form-group">
                <label>Fecha fin</label>
                <input type="date" name="end_date" />
              </div>
              <div class="form-group">
                <label>Hora inicio</label>
                <input type="time" name="start_time" />
              </div>
              <div class="form-group">
                <label>Hora fin</label>
                <input type="time" name="end_time" />
              </div>
              <div class="form-group">
                <label>Ubicación</label>
                <input type="text" name="location" placeholder="Lugar del evento" />
              </div>
              <div class="form-group">
                <label>Capacidad</label>
                <input type="number" name="capacity" min="0" placeholder="Sin límite" />
              </div>
              <div class="form-group">
                <label>
                  <input type="checkbox" name="is_public" checked /> Público
                </label>
              </div>
              <div class="form-group">
                <label>
                  <input type="checkbox" name="is_featured" /> Destacado
                </label>
              </div>
              <div class="form-actions full-width">
                <button type="button" class="btn btn-secondary close-form-btn">Cancelar</button>
                <button type="submit" class="btn btn-primary"><i class="ri-save-line"></i> Guardar</button>
              </div>
            </form>
          </div>
        </div>

        <div class="card">
          <div class="card-body">
            <div id="admin-events-list" class="table-wrapper">
              <p class="empty-message">Cargando eventos...</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Admin Expenses -->
      <section id="section-admin-expenses" class="section">
        <header class="section-header">
          <div>
            <h1>Gestión de Gastos</h1>
            <p>Registra y administra los gastos de la iglesia</p>
          </div>
          <button class="btn btn-primary" id="btn-create-expense">
            <i class="ri-add-line"></i>
            <span>Nuevo Gasto</span>
          </button>
        </header>
        
        <div id="admin-expense-form" class="card form-card hidden">
          <div class="card-header">
            <h3>Registrar Gasto</h3>
            <button class="btn btn-ghost btn-icon close-form-btn"><i class="ri-close-line"></i></button>
          </div>
          <div class="card-body">
            <form id="admin-expense-form-el" class="form-grid">
              <div class="form-group full-width">
                <label>Descripción</label>
                <input type="text" name="description" required placeholder="Descripción del gasto" />
              </div>
              <div class="form-group">
                <label>Monto</label>
                <input type="number" name="amount" step="0.01" min="0" required placeholder="0.00" />
              </div>
              <div class="form-group">
                <label>Categoría</label>
                <select name="category_id" id="expense-category-select">
                  <option value="">Sin categoría</option>
                </select>
              </div>
              <div class="form-group">
                <label>Fecha del gasto</label>
                <input type="date" name="expense_date" required />
              </div>
              <div class="form-group">
                <label>Fecha de vencimiento</label>
                <input type="date" name="due_date" />
              </div>
              <div class="form-group">
                <label>Proveedor</label>
                <input type="text" name="vendor" placeholder="Nombre del proveedor" />
              </div>
              <div class="form-group">
                <label>Método de pago</label>
                <select name="payment_method">
                  <option value="">Seleccionar...</option>
                  <option value="efectivo">Efectivo</option>
                  <option value="transferencia">Transferencia</option>
                  <option value="tarjeta">Tarjeta</option>
                  <option value="otro">Otro</option>
                </select>
              </div>
              <div class="form-group">
                <label>Número de recibo</label>
                <input type="text" name="receipt_number" placeholder="Ej: FAC-001" />
              </div>
              <div class="form-group full-width">
                <label>Notas</label>
                <textarea name="notes" rows="2" placeholder="Observaciones adicionales..."></textarea>
              </div>
              <div class="form-group full-width">
                <label>Documento de Soporte</label>
                <div class="file-upload-area" id="expense-upload-area">
                  <input type="file" name="support_file" id="expense-file-input" accept=".pdf,.jpg,.jpeg,.png" />
                  <div class="file-upload-placeholder">
                    <i class="ri-upload-cloud-line"></i>
                    <span>Arrastra un archivo o haz clic para seleccionar</span>
                    <small>PDF, JPG, PNG (máx. 10MB)</small>
                  </div>
                  <div class="file-selected hidden">
                    <i class="ri-file-line"></i>
                    <span id="expense-file-name">archivo.pdf</span>
                    <button type="button" class="btn btn-ghost btn-sm" id="btn-remove-expense-file">
                      <i class="ri-close-line"></i>
                    </button>
                  </div>
                </div>
              </div>
              <div class="form-actions full-width">
                <button type="button" class="btn btn-secondary close-form-btn">Cancelar</button>
                <button type="submit" class="btn btn-primary"><i class="ri-save-line"></i> Guardar</button>
              </div>
            </form>
          </div>
        </div>

        <div class="stats-row" id="expenses-summary">
          <div class="stat-card">
            <div class="stat-icon"><i class="ri-time-line"></i></div>
            <div class="stat-value" id="expenses-pending">0</div>
            <div class="stat-label">Pendientes</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon success"><i class="ri-check-line"></i></div>
            <div class="stat-value" id="expenses-approved">0</div>
            <div class="stat-label">Aprobados</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon primary"><i class="ri-money-dollar-circle-line"></i></div>
            <div class="stat-value" id="expenses-paid">0</div>
            <div class="stat-label">Pagados</div>
          </div>
        </div>

        <div class="card">
          <div class="card-body">
            <div id="admin-expenses-list" class="table-wrapper">
              <p class="empty-message">Cargando gastos...</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Admin Announcements -->
      <section id="section-admin-announcements" class="section">
        <header class="section-header">
          <div>
            <h1>Anuncios y Comunicados</h1>
            <p>Publica mensajes para la comunidad</p>
          </div>
          <button class="btn btn-primary" id="btn-create-announcement">
            <i class="ri-add-line"></i>
            <span>Nuevo Anuncio</span>
          </button>
        </header>
        
        <div id="admin-announcement-form" class="card form-card hidden">
          <div class="card-header">
            <h3>Crear Anuncio</h3>
            <button class="btn btn-ghost btn-icon close-form-btn"><i class="ri-close-line"></i></button>
          </div>
          <div class="card-body">
            <form id="admin-announcement-form-el" class="form-grid">
              <div class="form-group full-width">
                <label>Título</label>
                <input type="text" name="title" required placeholder="Título del anuncio" />
              </div>
              <div class="form-group full-width">
                <label>Contenido</label>
                <textarea name="content" rows="4" required placeholder="Escribe el mensaje..."></textarea>
              </div>
              <div class="form-group">
                <label>Tipo</label>
                <select name="announcement_type">
                  <option value="general">General</option>
                  <option value="urgente">Urgente</option>
                  <option value="evento">Evento</option>
                  <option value="oracion">Petición de oración</option>
                </select>
              </div>
              <div class="form-group">
                <label>Prioridad (0-10)</label>
                <input type="number" name="priority" min="0" max="10" value="0" />
              </div>
              <div class="form-group">
                <label>Fecha inicio</label>
                <input type="datetime-local" name="start_date" />
              </div>
              <div class="form-group">
                <label>Fecha fin</label>
                <input type="datetime-local" name="end_date" />
              </div>
              <div class="form-group full-width">
                <label>
                  <input type="checkbox" name="is_public" checked /> Visible públicamente
                </label>
              </div>
              <div class="form-actions full-width">
                <button type="button" class="btn btn-secondary close-form-btn">Cancelar</button>
                <button type="submit" class="btn btn-primary"><i class="ri-megaphone-line"></i> Publicar</button>
              </div>
            </form>
          </div>
        </div>

        <div class="card">
          <div class="card-body">
            <div id="admin-announcements-list" class="table-wrapper">
              <p class="empty-message">Cargando anuncios...</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Admin Documents -->
      <section id="section-admin-documents" class="section">
        <header class="section-header">
          <div>
            <h1><i class="ri-folder-3-line"></i> Documentos</h1>
            <p>Gestiona los documentos de soporte organizados por categoría</p>
          </div>
        </header>

        <!-- Document Folders -->
        <div class="documents-folders">
          <!-- System Files Folder -->
          <div class="folder-card" data-folder="system">
            <div class="folder-header">
              <div class="folder-icon system">
                <i class="ri-folder-settings-line"></i>
              </div>
              <div class="folder-info">
                <h3>Archivos del Sistema</h3>
                <p>Logos, banners y recursos de la iglesia</p>
              </div>
              <span class="folder-count" id="count-system">0 archivos</span>
              <div class="folder-toggle">
                <i class="ri-arrow-down-s-line"></i>
              </div>
            </div>
            <div class="folder-content hidden">
              <div class="folder-actions">
                <button class="btn btn-primary btn-sm" onclick="openUploadModal('system')">
                  <i class="ri-upload-line"></i> Subir Archivo
                </button>
              </div>
              <div id="docs-system" class="documents-grid">
                <p class="empty-message">No hay archivos del sistema</p>
              </div>
            </div>
          </div>

          <!-- Donations Folder -->
          <div class="folder-card" data-folder="donations">
            <div class="folder-header">
              <div class="folder-icon donations">
                <i class="ri-heart-3-line"></i>
              </div>
              <div class="folder-info">
                <h3>Soportes de Donaciones</h3>
                <p>Recibos y comprobantes de donaciones</p>
              </div>
              <span class="folder-count" id="count-donations">0 archivos</span>
              <div class="folder-toggle">
                <i class="ri-arrow-down-s-line"></i>
              </div>
            </div>
            <div class="folder-content hidden">
              <div id="docs-donations" class="documents-grid">
                <p class="empty-message">No hay soportes de donaciones</p>
              </div>
            </div>
          </div>

          <!-- Expenses Folder -->
          <div class="folder-card" data-folder="expenses">
            <div class="folder-header">
              <div class="folder-icon expenses">
                <i class="ri-wallet-3-line"></i>
              </div>
              <div class="folder-info">
                <h3>Soportes de Gastos</h3>
                <p>Facturas y comprobantes de gastos</p>
              </div>
              <span class="folder-count" id="count-expenses">0 archivos</span>
              <div class="folder-toggle">
                <i class="ri-arrow-down-s-line"></i>
              </div>
            </div>
            <div class="folder-content hidden">
              <div id="docs-expenses" class="documents-grid">
                <p class="empty-message">No hay soportes de gastos</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Upload Modal -->
        <div id="upload-document-modal" class="modal hidden">
          <div class="modal-overlay"></div>
          <div class="modal-content">
            <div class="modal-header">
              <h3>Subir Documento</h3>
              <button class="modal-close-btn"><i class="ri-close-line"></i></button>
            </div>
            <div class="modal-body">
              <form id="document-upload-form" enctype="multipart/form-data">
                <input type="hidden" name="category" id="upload-category" value="system" />
                <div class="form-group">
                  <label>Archivo *</label>
                  <div class="file-upload-area" id="document-upload-area">
                    <input type="file" name="file" id="document-file-input" required accept=".pdf,.jpg,.jpeg,.png,.doc,.docx,.xls,.xlsx" />
                    <div class="file-upload-placeholder">
                      <i class="ri-upload-cloud-line"></i>
                      <span>Arrastra un archivo o haz clic</span>
                      <small>PDF, JPG, PNG, DOC, XLS (máx. 10MB)</small>
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label>Descripción</label>
                  <input type="text" name="description" id="upload-description" placeholder="Descripción del documento" />
                </div>
                <div class="form-group">
                  <label>Tipo de archivo</label>
                  <select name="document_type" id="upload-doc-type">
                    <option value="logo">Logo de la iglesia</option>
                    <option value="cover">Portada de la iglesia</option>
                    <option value="other">Otro archivo del sistema</option>
                  </select>
                </div>
                <div class="form-actions">
                  <button type="button" class="btn btn-secondary modal-close-btn">Cancelar</button>
                  <button type="submit" class="btn btn-primary"><i class="ri-upload-line"></i> Subir</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </section>

      <!-- Admin Config -->
      <section id="section-admin-config" class="section">
        <header class="section-header">
          <div>
            <h1>Configuración de la Iglesia</h1>
            <p>Personaliza la información pública de tu iglesia</p>
          </div>
        </header>
        
        <form id="admin-config-form">
          <!-- Logos e Imágenes -->
          <div class="card">
            <div class="card-header"><h3><i class="ri-image-line"></i> Logos e Imágenes</h3></div>
            <div class="card-body">
              <div class="logos-grid">
                <div class="logo-upload-box">
                  <label>Logo Principal</label>
                  <p class="help-text">Aparece en el header, sidebar y paneles de usuario (recomendado: 200x200px)</p>
                  <div class="logo-preview" id="logo-preview">
                    <img id="current-logo" src="" alt="Logo" style="display:none;" />
                    <div class="logo-placeholder" id="logo-placeholder">
                      <i class="ri-image-add-line"></i>
                      <span>Sin logo</span>
                    </div>
                  </div>
                  <input type="file" id="logo-upload" accept="image/*" style="display:none;" />
                  <input type="hidden" name="logo_url" id="config-logo-url" />
                  <button type="button" class="btn btn-secondary btn-sm" onclick="document.getElementById('logo-upload').click()">
                    <i class="ri-upload-line"></i> Subir Logo
                  </button>
                </div>
                <div class="logo-upload-box">
                  <label>Imagen de Portada</label>
                  <p class="help-text">Aparece en el hero del sitio público (recomendado: 1920x600px)</p>
                  <div class="cover-preview" id="cover-preview">
                    <img id="current-cover" src="" alt="Portada" style="display:none;" />
                    <div class="cover-placeholder" id="cover-placeholder">
                      <i class="ri-landscape-line"></i>
                      <span>Sin imagen de portada</span>
                    </div>
                  </div>
                  <input type="file" id="cover-upload" accept="image/*" style="display:none;" />
                  <input type="hidden" name="cover_image_url" id="config-cover-url" />
                  <button type="button" class="btn btn-secondary btn-sm" onclick="document.getElementById('cover-upload').click()">
                    <i class="ri-upload-line"></i> Subir Portada
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Colores de Marca -->
          <div class="card">
            <div class="card-header"><h3><i class="ri-palette-line"></i> Colores de Marca</h3></div>
            <div class="card-body form-grid">
              <div class="form-group">
                <label>Color Primario</label>
                <div class="color-input-wrapper">
                  <input type="color" name="primary_color" id="config-primary-color" value="#8b5cf6" />
                  <input type="text" id="config-primary-color-text" value="#8b5cf6" placeholder="#8b5cf6" />
                </div>
              </div>
              <div class="form-group">
                <label>Color Secundario</label>
                <div class="color-input-wrapper">
                  <input type="color" name="secondary_color" id="config-secondary-color" value="#06b6d4" />
                  <input type="text" id="config-secondary-color-text" value="#06b6d4" placeholder="#06b6d4" />
                </div>
              </div>
            </div>
          </div>

          <!-- Información General -->
          <div class="card">
            <div class="card-header"><h3><i class="ri-information-line"></i> Información General</h3></div>
            <div class="card-body form-grid">
              <div class="form-group">
                <label>Nombre de la Iglesia *</label>
                <input type="text" name="church_name" id="config-church-name" required />
              </div>
              <div class="form-group">
                <label>Eslogan / Lema</label>
                <input type="text" name="slogan" id="config-slogan" placeholder="Un lugar de fe, esperanza y amor" />
              </div>
              <div class="form-group full-width">
                <label>Descripción Breve</label>
                <textarea name="description" id="config-description" rows="2" placeholder="Breve descripción de la iglesia para SEO y redes sociales..."></textarea>
              </div>
              <div class="form-group full-width">
                <label>Quiénes Somos / Historia</label>
                <textarea name="about_us" id="config-about-us" rows="4" placeholder="Cuenta la historia de tu iglesia, cuándo fue fundada, su propósito..."></textarea>
              </div>
              <div class="form-group full-width">
                <label>Nuestra Misión</label>
                <textarea name="mission" id="config-mission" rows="3" placeholder="¿Cuál es la misión de tu iglesia?"></textarea>
              </div>
              <div class="form-group full-width">
                <label>Nuestra Visión</label>
                <textarea name="vision" id="config-vision" rows="3" placeholder="¿Cuál es la visión de tu iglesia?"></textarea>
              </div>
              <div class="form-group full-width">
                <label>Nuestros Valores</label>
                <textarea name="values" id="config-values" rows="3" placeholder="Lista los valores fundamentales de tu iglesia..."></textarea>
              </div>
            </div>
          </div>

          <!-- Horarios de Servicio -->
          <div class="card">
            <div class="card-header">
              <h3><i class="ri-time-line"></i> Horarios de Servicio</h3>
              <button type="button" class="btn btn-ghost btn-sm" id="btn-add-schedule">
                <i class="ri-add-line"></i> Agregar
              </button>
            </div>
            <div class="card-body">
              <div id="schedules-list" class="schedules-list">
                <!-- Se llena dinámicamente -->
              </div>
              <p class="help-text">Agrega los horarios de cultos, estudios bíblicos y reuniones</p>
            </div>
          </div>

          <div class="card">
            <div class="card-header"><h3>Información de Contacto</h3></div>
            <div class="card-body form-grid">
              <div class="form-group full-width">
                <label>Dirección</label>
                <input type="text" name="address" id="config-address" placeholder="Calle 123 #45-67" />
              </div>
              <div class="form-group">
                <label>Ciudad</label>
                <input type="text" name="city" id="config-city" placeholder="Bogotá" />
              </div>
              <div class="form-group">
                <label>País</label>
                <input type="text" name="country" id="config-country" placeholder="Colombia" />
              </div>
              <div class="form-group">
                <label>Teléfono</label>
                <input type="tel" name="phone" id="config-phone" placeholder="+57 300 123 4567" />
              </div>
              <div class="form-group">
                <label>Email</label>
                <input type="email" name="email" id="config-email" placeholder="contacto@iglesia.com" />
              </div>
              <div class="form-group">
                <label>Sitio Web</label>
                <input type="url" name="website" id="config-website" placeholder="https://www.miglesia.com" />
              </div>
            </div>
          </div>

          <div class="card">
            <div class="card-header"><h3>Redes Sociales</h3></div>
            <div class="card-body form-grid">
              <div class="form-group">
                <label><i class="ri-facebook-fill"></i> Facebook</label>
                <input type="url" name="social_facebook" id="config-facebook" placeholder="https://facebook.com/..." />
              </div>
              <div class="form-group">
                <label><i class="ri-instagram-line"></i> Instagram</label>
                <input type="url" name="social_instagram" id="config-instagram" placeholder="https://instagram.com/..." />
              </div>
              <div class="form-group">
                <label><i class="ri-youtube-line"></i> YouTube</label>
                <input type="url" name="social_youtube" id="config-youtube" placeholder="https://youtube.com/..." />
              </div>
              <div class="form-group">
                <label><i class="ri-twitter-x-line"></i> X (Twitter)</label>
                <input type="url" name="social_twitter" id="config-twitter" placeholder="https://x.com/..." />
              </div>
              <div class="form-group">
                <label><i class="ri-tiktok-line"></i> TikTok</label>
                <input type="url" name="social_tiktok" id="config-tiktok" placeholder="https://tiktok.com/@..." />
              </div>
            </div>
          </div>

          <div class="card">
            <div class="card-header"><h3>Información de Donaciones</h3></div>
            <div class="card-body form-grid">
              <div class="form-group full-width">
                <label>Texto informativo de donaciones</label>
                <textarea name="donation_info" id="config-donation-info" rows="3" placeholder="Instrucciones para donar..."></textarea>
              </div>
              <div class="form-group">
                <label>Email de PayPal</label>
                <input type="email" name="paypal_email" id="config-paypal" placeholder="donaciones@iglesia.com" />
              </div>
              <div class="form-group">
                <label>Link de donación (externo)</label>
                <input type="url" name="donation_link" id="config-donation-link" placeholder="https://..." />
              </div>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <h3><i class="ri-live-fill" style="color: #ef4444;"></i> Transmisión en Vivo</h3>
            </div>
            <div class="card-body">
              <p class="text-muted" style="margin-bottom: 16px;">Configura los enlaces de transmisión en vivo para que tus feligreses puedan ver los servicios.</p>
              
              <div id="live-streams-list" class="streams-list">
                <!-- Streams will be loaded here -->
              </div>
              
              <div class="add-stream-form" style="margin-top: 16px;">
                <div class="form-grid">
                  <div class="form-group">
                    <label>Título de la transmisión</label>
                    <input type="text" id="new-stream-title" placeholder="Ej: Servicio Dominical" />
                  </div>
                  <div class="form-group">
                    <label>Plataforma</label>
                    <select id="new-stream-platform">
                      <option value="youtube">YouTube</option>
                      <option value="facebook">Facebook Live</option>
                      <option value="twitch">Twitch</option>
                      <option value="other">Otro</option>
                    </select>
                  </div>
                  <div class="form-group full-width">
                    <label>URL de la transmisión</label>
                    <input type="url" id="new-stream-url" placeholder="https://youtube.com/watch?v=..." />
                  </div>
                </div>
                <button type="button" class="btn btn-secondary" id="btn-add-stream">
                  <i class="ri-add-line"></i>
                  <span>Agregar Transmisión</span>
                </button>
              </div>
            </div>
          </div>

          <div class="form-actions">
            <button type="submit" class="btn btn-primary btn-lg">
              <i class="ri-save-line"></i>
              <span>Guardar Configuración</span>
            </button>
          </div>
        </form>
      </section>

      <!-- Admin Reports -->
      <section id="section-admin-reports" class="section">
        <header class="section-header">
          <div>
            <h1>Reportes Financieros</h1>
            <p>Estadísticas y reportes de la iglesia</p>
          </div>
          <div class="header-actions">
            <button class="btn btn-secondary" id="btn-export-excel">
              <i class="ri-file-excel-line"></i>
              <span>Exportar Excel</span>
            </button>
            <button class="btn btn-primary" id="btn-export-pdf">
              <i class="ri-file-pdf-line"></i>
              <span>Exportar PDF</span>
            </button>
          </div>
        </header>

        <!-- Filtros de período -->
        <div class="card">
          <div class="card-body">
            <div class="filters-row">
              <div class="filter-group">
                <label>Período</label>
                <select id="report-period">
                  <option value="month">Este Mes</option>
                  <option value="quarter">Este Trimestre</option>
                  <option value="year">Este Año</option>
                  <option value="custom">Personalizado</option>
                </select>
              </div>
              <div class="filter-group" id="custom-dates" style="display:none;">
                <label>Desde</label>
                <input type="date" id="report-from-date" />
              </div>
              <div class="filter-group" id="custom-dates-end" style="display:none;">
                <label>Hasta</label>
                <input type="date" id="report-to-date" />
              </div>
              <button class="btn btn-secondary" id="btn-apply-filter">
                <i class="ri-filter-line"></i>
                Aplicar
              </button>
            </div>
          </div>
        </div>
        
        <div class="stats-row">
          <div class="stat-card">
            <div class="stat-icon primary"><i class="ri-heart-3-line"></i></div>
            <div class="stat-value" id="report-total-donations">$0</div>
            <div class="stat-label">Total Donaciones</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon danger"><i class="ri-wallet-3-line"></i></div>
            <div class="stat-value" id="report-total-expenses">$0</div>
            <div class="stat-label">Total Gastos</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon success"><i class="ri-funds-line"></i></div>
            <div class="stat-value" id="report-balance">$0</div>
            <div class="stat-label">Balance</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon"><i class="ri-group-line"></i></div>
            <div class="stat-value" id="report-members">0</div>
            <div class="stat-label">Miembros</div>
          </div>
        </div>

        <!-- Tabla Resumen Mensual de Donaciones (Formato de Excel) -->
        <div class="card">
          <div class="card-header">
            <h3>Resumen de Donaciones por Mes</h3>
          </div>
          <div class="card-body">
            <div class="table-responsive">
              <table class="data-table" id="monthly-donations-table">
                <thead>
                  <tr>
                    <th>Fecha</th>
                    <th>Nombre</th>
                    <th>Efectivo</th>
                    <th>Transferencia</th>
                    <th>Documento</th>
                    <th>Diezmo</th>
                    <th>Ofrenda</th>
                    <th>Misiones</th>
                    <th>Total</th>
                  </tr>
                </thead>
                <tbody id="donations-report-tbody">
                  <tr><td colspan="9" class="empty-message">Cargando datos...</td></tr>
                </tbody>
                <tfoot>
                  <tr class="total-row">
                    <td colspan="5"><strong>TOTAL</strong></td>
                    <td id="total-diezmo">$0</td>
                    <td id="total-ofrenda">$0</td>
                    <td id="total-misiones">$0</td>
                    <td id="total-general">$0</td>
                  </tr>
                </tfoot>
              </table>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <h3>Donaciones por Tipo</h3>
          </div>
          <div class="card-body">
            <div id="donations-by-type-chart" class="breakdown-container">
              <p class="empty-message">Cargando datos...</p>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <h3>Resumen de Gastos</h3>
          </div>
          <div class="card-body">
            <div id="expenses-summary-report">
              <p class="empty-message">Cargando datos...</p>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <h3>Gastos por Categoría</h3>
          </div>
          <div class="card-body">
            <div id="expenses-by-category-chart" class="breakdown-container">
              <p class="empty-message">Cargando datos...</p>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script src="./js/app.js?v=20251215" type="module"></script>
</body>
</html>

